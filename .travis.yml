language: python

services:
  - docker

install:
  - make docker-build

script:
  - docker run quadraminstitute/quatradis:dev /bin/sh -c "cd /quatradis/tests; pytest;"

# Uncomment when we have confirmed travis is working correctly
#branches:
#  only:
#    - master

deploy:
  skip_cleanup: true
  provider: script
  script: make docker-push
  on:
    tags: true
    branch: master
